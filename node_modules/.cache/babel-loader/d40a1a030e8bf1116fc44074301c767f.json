{"ast":null,"code":"var _jsxFileName = \"/Users/allenxu/projects/htv7/htv7/htv7/client/src/components/LogoutButton.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport DesoIdentity from \"../deso/desoIdentity\";\nimport localStorageTTL from \"./localStorageTTL\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IdentityUsersKey = \"identityUsersV2\";\nconst LogoutButton = props => {\n  _s();\n  const [desoIdentity, setDesoIdentity] = useState(null);\n  useEffect(() => {\n    const deso = new DesoIdentity();\n    setDesoIdentity(deso);\n  }, []);\n  const logout = async () => {\n    const result = await desoIdentity.logoutAsync(props.publicKey);\n    let user = {};\n    if (localStorageTTL.getWithExpiry(IdentityUsersKey) === 'undefined') {\n      user = {};\n    } else if (localStorageTTL.getWithExpiry(IdentityUsersKey)) {\n      user = JSON.parse(localStorageTTL.getWithExpiry(IdentityUsersKey) || '{}');\n    }\n    if (!user.publicKey) {\n      props.setLoggedIn(false);\n      props.setPublicKey(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: logout,\n    children: \"Logout\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n_s(LogoutButton, \"92cT0EoMP1wUoSY0dGXYp4DOQwM=\");\n_c = LogoutButton;\nexport default LogoutButton;\nvar _c;\n$RefreshReg$(_c, \"LogoutButton\");","map":{"version":3,"names":["React","useState","useEffect","DesoIdentity","localStorageTTL","IdentityUsersKey","LogoutButton","props","desoIdentity","setDesoIdentity","deso","logout","result","logoutAsync","publicKey","user","getWithExpiry","JSON","parse","setLoggedIn","setPublicKey"],"sources":["/Users/allenxu/projects/htv7/htv7/htv7/client/src/components/LogoutButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport DesoIdentity from \"../deso/desoIdentity\";\nimport localStorageTTL from \"./localStorageTTL\";\nconst IdentityUsersKey = \"identityUsersV2\"\n\nconst LogoutButton = (props) => {\n    const [desoIdentity, setDesoIdentity] = useState(null);\n\n    useEffect(() => {\n        const deso = new DesoIdentity();\n        setDesoIdentity(deso);\n    }, []);\n\n    const logout = async () => {\n        const result = await desoIdentity.logoutAsync(props.publicKey);\n        \n        let user = {}\n        if (localStorageTTL.getWithExpiry(IdentityUsersKey) === 'undefined'){\n          user = {}\n        } else if (localStorageTTL.getWithExpiry(IdentityUsersKey)){\n          user = JSON.parse(localStorageTTL.getWithExpiry(IdentityUsersKey) || '{}')\n        }\n    \n        if(!user.publicKey){\n            props.setLoggedIn(false);\n            props.setPublicKey(null);\n        }\n    }\n\n    return (\n        <button onClick={logout}>Logout</button>\n    );\n};\n\nexport default LogoutButton;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,eAAe,MAAM,mBAAmB;AAAC;AAChD,MAAMC,gBAAgB,GAAG,iBAAiB;AAE1C,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAAA;EAC5B,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAEtDC,SAAS,CAAC,MAAM;IACZ,MAAMQ,IAAI,GAAG,IAAIP,YAAY,EAAE;IAC/BM,eAAe,CAACC,IAAI,CAAC;EACzB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,MAAM,GAAG,YAAY;IACvB,MAAMC,MAAM,GAAG,MAAMJ,YAAY,CAACK,WAAW,CAACN,KAAK,CAACO,SAAS,CAAC;IAE9D,IAAIC,IAAI,GAAG,CAAC,CAAC;IACb,IAAIX,eAAe,CAACY,aAAa,CAACX,gBAAgB,CAAC,KAAK,WAAW,EAAC;MAClEU,IAAI,GAAG,CAAC,CAAC;IACX,CAAC,MAAM,IAAIX,eAAe,CAACY,aAAa,CAACX,gBAAgB,CAAC,EAAC;MACzDU,IAAI,GAAGE,IAAI,CAACC,KAAK,CAACd,eAAe,CAACY,aAAa,CAACX,gBAAgB,CAAC,IAAI,IAAI,CAAC;IAC5E;IAEA,IAAG,CAACU,IAAI,CAACD,SAAS,EAAC;MACfP,KAAK,CAACY,WAAW,CAAC,KAAK,CAAC;MACxBZ,KAAK,CAACa,YAAY,CAAC,IAAI,CAAC;IAC5B;EACJ,CAAC;EAED,oBACI;IAAQ,OAAO,EAAET,MAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAgB;AAEhD,CAAC;AAAC,GA3BIL,YAAY;AAAA,KAAZA,YAAY;AA6BlB,eAAeA,YAAY;AAAC;AAAA"},"metadata":{},"sourceType":"module"}