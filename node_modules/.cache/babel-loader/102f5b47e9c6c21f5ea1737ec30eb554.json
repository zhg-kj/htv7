{"ast":null,"code":"var _jsxFileName = \"/Users/allenxu/projects/htv7/htv7/htv7/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\n\n// We use Route in order to define the different routes of our application\nimport { Route, Routes } from \"react-router-dom\";\n\n// We import all the components we need in our app\nimport Navbar from \"./components/navbar\";\nimport RecordList from \"./components/recordList\";\nimport Edit from \"./components/edit\";\nimport Create from \"./components/create\";\nimport Login from \"./pages/login\";\nimport Testing from \"./pages/apiTestingPage\";\nimport Creator from \"./pages/creator\";\n\n// Misc\nimport localStorageTTL from \"./components/localStorageTTL\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IdentityUsersKey = \"identityUsersV2\";\nconst App = () => {\n  _s();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [publicKey, setPublicKey] = useState(null);\n  useEffect(() => {\n    let user = {};\n    if (localStorageTTL.getWithExpiry(IdentityUsersKey) === 'undefined') {\n      user = {};\n    } else if (localStorageTTL.getWithExpiry(IdentityUsersKey)) {\n      user = JSON.parse(localStorageTTL.getWithExpiry(IdentityUsersKey) || '{}');\n    }\n    if (user.publicKey) {\n      setLoggedIn(true);\n      setPublicKey(user.publicKey);\n    }\n  }, []);\n  if (!loggedIn) {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      publicKey: publicKey,\n      setLoggedIn: setLoggedIn,\n      setPublicKey: setPublicKey\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {\n        publicKey: publicKey,\n        setLoggedIn: setLoggedIn,\n        setPublicKey: setPublicKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n        title: \"desoidentity\",\n        id: \"identity\",\n        frameBorder: \"0\",\n        src: \"https://identity.deso.org/embed?v=2\",\n        style: {\n          height: \"100vh\",\n          width: \"100vw\",\n          display: \"none\",\n          position: \"fixed\",\n          zIndex: 1000,\n          left: 0,\n          top: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Testing, {\n            publicKey: publicKey\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/record\",\n          element: /*#__PURE__*/_jsxDEV(RecordList, {\n            publicKey: publicKey,\n            setPublicKey: setPublicKey,\n            setLoggedIn: setLoggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/creator\",\n          element: /*#__PURE__*/_jsxDEV(Creator, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/edit/:id\",\n          element: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/create\",\n          element: /*#__PURE__*/_jsxDEV(Create, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n};\n_s(App, \"cxol418oS63IK3XpqDwPq2Jbivw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Route","Routes","Navbar","RecordList","Edit","Create","Login","Testing","Creator","localStorageTTL","IdentityUsersKey","App","loggedIn","setLoggedIn","publicKey","setPublicKey","user","getWithExpiry","JSON","parse","height","width","display","position","zIndex","left","top"],"sources":["/Users/allenxu/projects/htv7/htv7/htv7/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n \n// We use Route in order to define the different routes of our application\nimport { Route, Routes } from \"react-router-dom\";\n \n// We import all the components we need in our app\nimport Navbar from \"./components/navbar\";\nimport RecordList from \"./components/recordList\";\nimport Edit from \"./components/edit\";\nimport Create from \"./components/create\";\nimport Login from \"./pages/login\";\nimport Testing from \"./pages/apiTestingPage\";\nimport Creator from\"./pages/creator\";\n\n// Misc\nimport localStorageTTL from \"./components/localStorageTTL\";\nconst IdentityUsersKey = \"identityUsersV2\"\n\nconst App = () => {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [publicKey, setPublicKey] = useState(null);\n\n  useEffect(() => {\n      let user = {}\n      if (localStorageTTL.getWithExpiry(IdentityUsersKey) === 'undefined'){\n        user = {}\n      } else if (localStorageTTL.getWithExpiry(IdentityUsersKey)){\n        user = JSON.parse(localStorageTTL.getWithExpiry(IdentityUsersKey) || '{}')\n      }\n  \n      if(user.publicKey){\n          setLoggedIn(true);\n          setPublicKey(user.publicKey);\n      }\n  }, []);\n\n  if (!loggedIn) {\n    return (<Login publicKey={publicKey} setLoggedIn={setLoggedIn} setPublicKey={setPublicKey}/>);\n  }\n  else {\n    return (\n      <div>\n        <Navbar publicKey={publicKey} setLoggedIn={setLoggedIn} setPublicKey={setPublicKey}/>\n        <iframe\n          title=\"desoidentity\"\n          id=\"identity\"\n          frameBorder=\"0\"\n          src=\"https://identity.deso.org/embed?v=2\"\n          style={{height: \"100vh\", width: \"100vw\", display: \"none\", position: \"fixed\",  zIndex: 1000, left: 0, top: 0}}\n        ></iframe>\n        <Routes>\n          <Route exact path=\"/\" element={<Testing publicKey={publicKey} />} />\n          <Route exact path=\"/record\" element={<RecordList publicKey={publicKey} setPublicKey={setPublicKey} setLoggedIn={setLoggedIn}/>} />\n          <Route path=\"/creator\" element={<Creator />} />\n          <Route path=\"/edit/:id\" element={<Edit />} />\n          <Route path=\"/create\" element={<Create />} />\n          <Route path=\"/login\" element={<Login />} />\n        </Routes>\n      </div>\n    );\n }\n};\n \nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}